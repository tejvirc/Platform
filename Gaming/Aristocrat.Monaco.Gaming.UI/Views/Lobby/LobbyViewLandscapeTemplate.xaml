<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:bink="clr-namespace:ManagedBink;assembly=BinkViewerControl"        
    xmlns:converters="clr-namespace:Aristocrat.Monaco.Gaming.UI.Converters"
    xmlns:viewModels="clr-namespace:Aristocrat.Monaco.Gaming.UI.ViewModels"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:models="clr-namespace:Aristocrat.Monaco.Gaming.UI.Models"
    xmlns:lobby="clr-namespace:Aristocrat.Monaco.Gaming.UI.Views.Lobby"
    xmlns:common="http://monaco.aristocrat.com/common"
    xmlns:controls="clr-namespace:Aristocrat.Monaco.Gaming.UI.Views.Controls"
    xmlns:commonControls="clr-namespace:Aristocrat.Monaco.UI.Common.Controls;assembly=Aristocrat.Monaco.UI.Common"
    xmlns:gif="http://wpfanimatedgif.codeplex.com" xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!-- Apply MahApps.Metro styles to all controls -->
    <ResourceDictionary.MergedDictionaries>
        <!-- MahApps.Metro resource dictionaries. Make sure that all file names are Case Sensitive! -->
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
        <!-- Accent and AppTheme setting -->
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />

        <ResourceDictionary Source="../../Skins/Styles.xaml" />
        <ResourceDictionary Source="/Aristocrat.Monaco.UI.Common;component/Skins/Converters.xaml"/>

        <!-- Jurisdiction xaml dictionary is loaded dynamically; see SkinLoader -->
    </ResourceDictionary.MergedDictionaries>

    <converters:ViewFiltersToBoolConverter x:Key="FiltersToBoolConv"/>
    <converters:DecoratorIconVisibilityConverter x:Key="AnimatedIconVisibilityConv"/>
    <converters:DecoratorIconVisibilityConverter x:Key="StaticIconVisibilityConv" InvertEnabledValue="True"/>
    <converters:ProgressiveLabelVisibilityConverter x:Key="ProgressiveLabelVisibilityConv"/>
    <converters:MarginConverter x:Key="MarginConverter"/>
    <converters:DenomPanelWidthConverter x:Key="DenomPanelWidthConv"/>
    <converters:DenomPanelHeightConverter x:Key="DenomPanelHeightConv"/>
    <converters:GameIconHeightConverter x:Key="GameIconHeightConv"/>
    <converters:GameIconImageHeightConverter x:Key="GameIconImageHeightConv"/>
    <converters:GameTabMarginConverter x:Key="GameTabMarginConv"/>
    <converters:GridSpacingConverter x:Key="GridSpacingConverter"/>
    <converters:LobbyColumnWidthConverter x:Key="ColumnWidthConverter"/>
    <converters:LobbyOuterColumnWidthConverter x:Key="LobbyOuterColumnWidthConv"/>
    <converters:LobbyColumnMinWidthConverter x:Key="ColumnMinWidthConv"/>
    <converters:ProgressiveLabelSizeConverter x:Key="ProgressiveLabelSizeConv"/>
    <converters:MultiParameterCommandConverter x:Key="MultiParameterCommandConv"/>
    <converters:CharacterToResourceImageConverter x:Key="CharacterToResourceImageConv"/>
    <converters:GameIconJackpotTextVisibilityConverter x:Key="GameIconJackpotTextVisibilityConv"/>
    <converters:GameTileMarginConverter x:Key="GameTileMarginConv"/>

    <sys:Boolean x:Key="FalseValue">False</sys:Boolean>
    <sys:Boolean x:Key="TrueValue">True</sys:Boolean>
    <sys:Double x:Key="ExtraLargeGameIconDenomIconWidth">80</sys:Double>
    <sys:Double x:Key="ExtraLargeGameIconDenomIconHeight">52</sys:Double>
    <Thickness x:Key="ExtraLargeGameIconDenomIconMargin" Left="15" Top="25" Right="15" Bottom="25"/>

    <Storyboard x:Key="AttractHaloFadeInStoryboard">
        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         From="0.0" To="1.0" Duration="0:0:2.0" BeginTime="0:0:0"
                         AutoReverse="False">
            <DoubleAnimation.EasingFunction>
                <QuadraticEase EasingMode="EaseInOut"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>

    <Storyboard x:Key="AttractHaloFadeOutStoryboard">
        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         From="1.0" To="0.0" Duration="0:0:2.0" BeginTime="0:0:0"
                         AutoReverse="False">
            <DoubleAnimation.EasingFunction>
                <QuadraticEase EasingMode="EaseInOut"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>

    <Storyboard x:Key="AttractFadeInStoryboard">
        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         From="0.0" To="1.0" Duration="0:0:0.1" BeginTime="0:0:0"
                         AutoReverse="False">
            <DoubleAnimation.EasingFunction>
                <QuadraticEase EasingMode="EaseInOut"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>

    <Storyboard x:Key="AttractFadeOutStoryboard">
        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         From="1.0" To="0.0" Duration="0:0:0.1" BeginTime="0:0:0"
                         AutoReverse="False">
            <DoubleAnimation.EasingFunction>
                <QuadraticEase EasingMode="EaseInOut"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>

    <LinearGradientBrush x:Key="JackpotTextGradient" StartPoint=".5,0" EndPoint=".5,1" Opacity="1">
        <GradientStop Color="#FFF100" Offset=".5"/>
        <GradientStop Color="#FFB000" Offset=".1"/>
        <GradientStop Color="#FFFF00" Offset=".45"/>
        <GradientStop Color="#FFFF00" Offset=".65"/>
        <GradientStop Color="#FFB300" Offset=".70"/>
        <GradientStop Color="#FFD600" Offset=".95"/>
    </LinearGradientBrush>

    <Style x:Key="DenomTextStyle" TargetType="controls:TextPath">
        <Setter Property="Fill" Value="White"/>
        <Setter Property="FontFamily" Value="Impact"/>
        <Setter Property="FontSize" Value="28"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="IsHitTestVisible" Value="False"/>
        <Setter Property="Stroke" Value="Black"/>
        <Setter Property="StrokeThickness" Value="2.0"/>
        <Setter Property="VerticalAlignment" Value="Bottom"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                <Setter Property="Fill" Value="Red"/>
                <Setter Property="Stroke" Value="Yellow"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="SharedDenomTextStyle" TargetType="controls:TextPath" BasedOn="{StaticResource DenomTextStyle}">
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect ShadowDepth="0" Color="Black" BlurRadius="4"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Fill" Value="LightBlue"/>
    </Style>

    <DataTemplate x:Key="LobbyViewLandscapeTemplate" DataType="{x:Type viewModels:LobbyViewModel}">
        <Grid>
            <Grid.Background>
                <ImageBrush ImageSource="{DynamicResource BottomBackground}"/>
            </Grid.Background>
            <Viewbox>
                <Grid Width="1920" Height="1080">
                    <Grid.RowDefinitions>
                        <RowDefinition Height=".04*"/>
                        <RowDefinition Height=".70*"/>
                        <RowDefinition Height=".08*"/>
                        <RowDefinition Height=".05*"/>
                        <RowDefinition Height=".13*"/>
                    </Grid.RowDefinitions>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="{Binding IsExtraLargeGameIconTabActive, Converter={StaticResource LobbyOuterColumnWidthConv}}">
                            <ColumnDefinition.MinWidth>
                                <MultiBinding Converter="{StaticResource ColumnMinWidthConv}">
                                    <Binding Path="GameCount"/>
                                    <Binding Path="PreserveGameLayoutSideMargins"/>
                                    <Binding Path="IsExtraLargeGameIconTabActive"/>
                                </MultiBinding>
                            </ColumnDefinition.MinWidth>
                        </ColumnDefinition>
                        <ColumnDefinition>
                            <ColumnDefinition.Width>
                                <MultiBinding Converter="{StaticResource ColumnWidthConverter}">
                                    <Binding Path="GameCount"/>
                                    <Binding Path="PreserveGameLayoutSideMargins"/>
                                    <Binding Path="IsExtraLargeGameIconTabActive"/>
                                </MultiBinding>
                            </ColumnDefinition.Width>
                        </ColumnDefinition>
                        <ColumnDefinition Width="{Binding IsExtraLargeGameIconTabActive, Converter={StaticResource LobbyOuterColumnWidthConv}}">
                            <ColumnDefinition.MinWidth>
                                <MultiBinding Converter="{StaticResource ColumnMinWidthConv}">
                                    <Binding Path="GameCount"/>
                                    <Binding Path="PreserveGameLayoutSideMargins"/>
                                    <Binding Path="IsExtraLargeGameIconTabActive"/>
                                </MultiBinding>
                            </ColumnDefinition.MinWidth>
                        </ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <!--**** HEADER ****-->
                    <Viewbox Grid.Row="0" Grid.Column="1" Visibility="{Binding IsTabView, Converter={StaticResource BoolToCollapsedConverter}}">
                        <Image Stretch="None" Source="{DynamicResource SelectAGame}"
                               HorizontalAlignment="Center" VerticalAlignment="Top"
                               RenderTransformOrigin="0.5 0.5">
                            <Image.RenderTransform>
                                <TranslateTransform X="0" Y="{Binding ChooseGameOffsetY}" />
                            </Image.RenderTransform>
                        </Image>
                    </Viewbox>

                    <!--**** Responsible Gaming Info Button ****-->
                    <Button Grid.Row="0" Grid.Column="2"
                            HorizontalAlignment="Right" VerticalAlignment="Top"
                            Margin="0 40 40 0"
                            Style="{StaticResource stlFlatButton}"
                            Command="{Binding Path=ResponsibleGamingDialogOpenCommand}"
                            Visibility="{Binding IsResponsibleGamingInfoVisible, Converter={StaticResource BoolToVisConverter}}">
                        <Image Source="{DynamicResource ResponsibleGaming}" Stretch="None"/>
                    </Button>

                    <!--**** Bartop UI ****-->
                    <Grid Grid.Row="0" Grid.RowSpan="4" Grid.Column="0" Grid.ColumnSpan="3" Width="1920" Height="1080" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Visibility="{Binding IsTabView, Converter={StaticResource BoolToVisConverter}}">
                        <commonControls:CustomItemsControl x:Name="TabsControl" ItemsSource="{Binding GameTabInfo.Tabs}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Grid />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="{x:Type viewModels:GameTabInfo}">
                                    <commonControls:ImageTransparentPassThrough x:Name="GameTab" common:ImageHelper.SourceResourceKey="{Binding TabResourceKey}">
                                        <commonControls:ImageTransparentPassThrough.Style>
                                            <Style TargetType="{x:Type commonControls:ImageTransparentPassThrough}">
                                                <Setter Property="Panel.ZIndex" Value = "1"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Enabled}" Value="True">
                                                        <Setter Property="Panel.ZIndex" Value = "2"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </commonControls:ImageTransparentPassThrough.Style>
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="MouseLeftButtonDown" >
                                                <i:InvokeCommandAction Command="{Binding DataContext.GameTabPressedCommand, ElementName=TabsControl}" CommandParameter="{Binding}"  />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </commonControls:ImageTransparentPassThrough>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </commonControls:CustomItemsControl>
                        <ItemsControl x:Name="TabLabelsControl" ItemsSource="{Binding GameTabInfo.Tabs}" VerticalAlignment="Top" Margin="55,51,55,0">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="6" Panel.ZIndex="10" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="{x:Type viewModels:GameTabInfo}">
                                    <Viewbox Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center" IsHitTestVisible="False"
                                             Margin="{Binding Converter={StaticResource GameTabMarginConv}}">
                                        <Grid Height="98">
                                            <Image common:ImageHelper.SourceResourceKey="{Binding LabelResourceKey}"
                                                   Margin="10 0"
                                                   Visibility="{Binding HasAnimatedResource, Converter={StaticResource BoolToCollapsedConverter}}"/>
                                            <Image gif:ImageBehavior.AnimatedSource="{Binding LabelAnimatedResourcePath}"
                                                   Stretch="None"
                                                   VerticalAlignment="Top"
                                                   Visibility="{Binding HasAnimatedResource, Converter={StaticResource BoolToVisConverter}}">
                                                <Image.Style>
                                                    <Style TargetType="{x:Type Image}">
                                                        <Setter Property="Height" Value="Auto"/>
                                                        <Style.Triggers>
                                                            <!-- Cut off the bottom bit of the image so it doesn't overlap the tab border that's at a lower z-index since this control is higher -->
                                                            <DataTrigger Binding="{Binding Enabled}" Value="False">
                                                                <Setter Property="Height" Value="82"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Image.Style>
                                            </Image>
                                        </Grid>
                                    </Viewbox>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <ItemsControl Panel.ZIndex="11" x:Name="SubTabsControl" ItemsSource="{Binding GameTabInfo.SubTabs}" HorizontalAlignment="Left" VerticalAlignment="Top" Height="69" Margin="{Binding GameTabInfo.SubTabsMargin}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate DataType="{x:Type viewModels:SubTabInfoViewModel}">
                                    <Grid Visibility="{Binding IsVisible, Converter={StaticResource BoolToVisConverter}}">
                                        <Image Source="{DynamicResource SubTabNormal}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="MouseLeftButtonDown" >
                                                    <i:InvokeCommandAction Command="{Binding DataContext.SubTabPressedCommand, ElementName=SubTabsControl }" CommandParameter="{Binding}"  />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </Image>
                                        <Image common:ImageHelper.SourceResourceKey="{Binding ResourceKey}" Height="40" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,9,0,0" IsHitTestVisible="False" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>

                    <!--**** GAME GRID ****-->
                    <ItemsControl x:Name="GameList"
                                  FocusVisualStyle="{x:Null}"
                                  Margin="{Binding Path=MarginInputs, Converter={StaticResource MarginConverter}, ConverterParameter=GameGrid}"
                                  Grid.Row="1" Grid.RowSpan="2" Grid.Column="1"
                                  ItemsSource="{Binding Path=DisplayedGameList}"
                                  HorizontalAlignment="Left"
                                  VerticalAlignment="Top">
                        <ItemsControl.ItemsPanel>
                            <!-- Swap out the panel that arranges the items -->
                            <ItemsPanelTemplate>
                                <controls:GameLayoutPanel Spacing="{Binding MarginInputs, Converter={StaticResource GridSpacingConverter}}"
                                                          IsTabView="{Binding IsTabView}"
                                                          IsExtraLargeGameIconTabActive="{Binding IsExtraLargeGameIconTabActive}"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <!-- Specify the UI to render each item -->
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type models:GameInfo}">
                                <Grid x:Name="GameTile" VerticalAlignment="Top">
                                    <Grid.Margin>
                                        <MultiBinding Converter="{StaticResource GameTileMarginConv}">
                                            <Binding Path="DataContext.MarginInputs" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                            <Binding Path="DataContext.ProgressiveLabelDisplay.MultipleGameAssociatedSapLevelTwoEnabled" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                        </MultiBinding>
                                    </Grid.Margin>
                                    <Grid HorizontalAlignment="Left" VerticalAlignment="Top"
                                          Height="{Binding Path=DataContext.MarginInputs, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource GameIconHeightConv}}">

                                        <!-- Progressive label below non-premium game icons -->
                                        <Grid HorizontalAlignment="Center" VerticalAlignment="Bottom"
                                              Margin="0 0 0 46">
                                            <Grid.Visibility>
                                                <MultiBinding Converter="{StaticResource ProgressiveLabelVisibilityConv}">
                                                    <Binding Path="HasProgressiveLabelDisplay"/>
                                                    <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                                </MultiBinding>
                                            </Grid.Visibility>
                                            <Image Stretch="None" Source="{DynamicResource ProgressiveOverlay}"
                                                   RenderOptions.BitmapScalingMode="HighQuality"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center" />
                                            <Image Stretch="None" Source="{DynamicResource ProgressiveBackground}"
                                                   RenderOptions.BitmapScalingMode="HighQuality"
                                                   Visibility="{Binding IsSelectedWithProgressiveLabel, Converter={StaticResource BoolToCollapsedConverter}}"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center" />
                                            <Image Stretch="None" Source="{DynamicResource ProgressiveSelectedBackground}"
                                                   RenderOptions.BitmapScalingMode="HighQuality"
                                                   Visibility="{Binding IsSelectedWithProgressiveLabel, Converter={StaticResource BoolToVisConverter}}"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center" />
                                            <Image Stretch="None" Source="{DynamicResource GameSelectedWithProgressivesOverlay}"
                                                   RenderOptions.BitmapScalingMode="HighQuality"
                                                   Visibility="{Binding IsSelectedWithProgressiveLabel, Converter={StaticResource BoolToVisConverter}}"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Center" />
                                            <TextBlock Text="{Binding ProgressiveIndicatorText}"
                                                       Visibility="{Binding HasProgressiveLabelDisplay, Converter={StaticResource BoolToVisConverter}}"
                                                       FontFamily="Verdana"
                                                       Margin="{Binding IsSelectedWithProgressiveLabel, Converter={StaticResource MarginConverter}, ConverterParameter=ProgressiveOverlayText}"
                                                       HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       TextAlignment="Center"
                                                       FontWeight="ExtraBold"
                                                       FontSize="{Binding Path=Text, RelativeSource={RelativeSource Self}, Converter={StaticResource ProgressiveLabelSizeConv}}"
                                                       Foreground="{StaticResource JackpotTextGradient}"/>
                                        </Grid>

                                        <!-- Use DataContext of ItemsControl instead of current GameInfo for SelectCommand -->
                                        <Button x:Name="GameIconButton" Style="{StaticResource stlFlatButton}"
                                                HorizontalAlignment="Center"
                                                VerticalAlignment="Top"
                                                Tag="{Binding Name}"
                                                Width="Auto"
                                                Height="Auto"
                                                Command="{Binding Path=DataContext.GameSelectCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                CommandParameter="{Binding}">
                                            <Button.IsEnabled>
                                                <MultiBinding Converter="{StaticResource FiltersToBoolConv}">
                                                    <Binding Path="DataContext.DenomFilter" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                                    <Binding Path="FilteredDenomination" />
                                                    <Binding Path="Enabled" />
                                                    <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}" Converter="{StaticResource InverseBoolConverter}"/>
                                                </MultiBinding>
                                            </Button.IsEnabled>
                                            <Grid VerticalAlignment="Top"
                                                  HorizontalAlignment="Center">
                                                <ContentControl x:Name="ButtonImage"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Top"
                                                                Margin="0">
                                                    <ContentControl.Style>
                                                        <Style TargetType="ContentControl">
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ImageIsBink, UpdateSourceTrigger=PropertyChanged}" Value="True">
                                                                    <Setter Property="Content">
                                                                        <Setter.Value>
                                                                            <bink:BinkViewerControl Stretch="None"
                                                                                                    Filename="{Binding ImagePath}"/>
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding ImageIsBink, UpdateSourceTrigger=PropertyChanged}" Value="False">
                                                                    <Setter Property="Content">
                                                                        <Setter.Value>
                                                                            <Image RenderOptions.BitmapScalingMode="HighQuality"
                                                                                   Stretch="Uniform"
                                                                                   gif:ImageBehavior.AnimatedSource="{Binding ImagePath}"
                                                                                   Width="Auto"
                                                                                   Height="{Binding Path=DataContext.MarginInputs, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource GameIconImageHeightConv}}" />
                                                                        </Setter.Value>
                                                                    </Setter>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </ContentControl.Style>
                                                </ContentControl>
                                                
                                                <Image x:Name="SelectedImage"
                                                       Source="{DynamicResource GameSelectedOverlay}"
                                                       RenderOptions.BitmapScalingMode="HighQuality"
                                                       Margin="0"
                                                       Height="{Binding Path=DataContext.MarginInputs, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource GameIconImageHeightConv}}"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Top">
                                                    <Image.Visibility>
                                                        <MultiBinding Converter="{StaticResource LogicalAndTrueVisibleFalseCollapsed}">
                                                            <Binding Path="IsSelected"/>
                                                            <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}" Converter="{StaticResource InverseBoolConverter}"/>
                                                        </MultiBinding>
                                                    </Image.Visibility>
                                                </Image>

                                                <Image Source="{DynamicResource PlatinumIcon}">
                                                    <Image.Visibility>
                                                        <MultiBinding Converter="{StaticResource StaticIconVisibilityConv}">
                                                            <Binding Path="PlatinumSeries" />
                                                            <Binding Path="DataContext.IsLobbyVisible" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                            <Binding Path="IsEnabled" RelativeSource="{RelativeSource AncestorType=Button}"/>
                                                            <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                                        </MultiBinding>
                                                    </Image.Visibility>
                                                </Image>

                                                <StackPanel Background="Transparent"
                                                            Orientation="Horizontal"
                                                            Margin="{Binding DataContext.GameCount, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource MarginConverter}, ConverterParameter=Bonus}"
                                                            HorizontalAlignment="Left" VerticalAlignment="Top" >
                                                    <StackPanel.Visibility>
                                                        <MultiBinding Converter="{StaticResource GameIconJackpotTextVisibilityConv}">
                                                            <Binding Path="HasProgressiveOrBonusValue"/>
                                                            <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                                        </MultiBinding>
                                                    </StackPanel.Visibility>
                                                    <Image Stretch="None" Source="{DynamicResource JackpotText}" Margin="0 1 0 0"
                                                           RenderOptions.BitmapScalingMode="HighQuality"
                                                           HorizontalAlignment="Left" VerticalAlignment="Top" />

                                                    <TextBlock Text="{Binding ProgressiveOrBonusValue}" Margin="5 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Top"
                                                               FontFamily="Arial" FontWeight="ExtraBold" FontSize="20" Foreground="{StaticResource JackpotTextGradient}"/>

                                                </StackPanel>

                                                <bink:BinkViewerControl HorizontalAlignment="Left"
                                                                        VerticalAlignment="Top"
                                                                        Margin="{Binding DataContext.GameCount, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource MarginConverter}, ConverterParameter=NewStar}"
                                                                        Stretch="None"
                                                                        Filename="{DynamicResource NewStarPath}">
                                                    <bink:BinkViewerControl.Visibility>
                                                        <MultiBinding Converter="{StaticResource AnimatedIconVisibilityConv}">
                                                            <Binding Path="IsNew" UpdateSourceTrigger="PropertyChanged"/>
                                                            <Binding Path="DataContext.IsLobbyVisible" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                            <Binding Path="IsEnabled" RelativeSource="{RelativeSource AncestorType=Button}"/>
                                                            <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}"/>
                                                        </MultiBinding>
                                                    </bink:BinkViewerControl.Visibility>
                                                </bink:BinkViewerControl>

                                                <!-- Tint disabled game buttons to make them look disabled. -->
                                                <Rectangle Fill="Black" Opacity="0.5"
                                                           HorizontalAlignment="Left"
                                                           VerticalAlignment="Top"
                                                           Width="{Binding ElementName=ButtonImage, Path=ActualWidth}"
                                                           Height="{Binding ElementName=ButtonImage, Path=ActualHeight}">
                                                    <Rectangle.Visibility>
                                                        <MultiBinding Converter="{StaticResource LogicalOrTrueCollapsedFalseVisible}">
                                                            <Binding Path="IsEnabled" RelativeSource="{RelativeSource AncestorType=Button}"/>
                                                            <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                        </MultiBinding>
                                                    </Rectangle.Visibility>
                                                    <Rectangle.OpacityMask>
                                                        <ImageBrush ImageSource="{Binding ImagePath}"/>
                                                    </Rectangle.OpacityMask>
                                                </Rectangle>

                                                <!-- The following needs to come after to prevent double blending disabled look -->
                                                <!-- Static star is only visible when it is disabled -->
                                                <Grid x:Name="StaticStarGroup"
                                                      Margin="{Binding DataContext.GameCount, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource MarginConverter}, ConverterParameter=NewStar}"
                                                      HorizontalAlignment="Left" VerticalAlignment="Top">
                                                    <Grid.Visibility>
                                                        <MultiBinding Converter="{StaticResource StaticIconVisibilityConv}">
                                                            <Binding Path="IsNew" UpdateSourceTrigger="PropertyChanged"/>
                                                            <Binding Path="DataContext.IsLobbyVisible" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                            <Binding Path="IsEnabled" RelativeSource="{RelativeSource AncestorType=Button}"/>
                                                            <Binding Path="DataContext.IsExtraLargeGameIconTabActive" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                        </MultiBinding>
                                                    </Grid.Visibility>
                                                    <Image x:Name="StaticStarImage"
                                                           HorizontalAlignment="Left" VerticalAlignment="Top"
                                                           Stretch="None" Source="{DynamicResource StaticStarIcon}"/>
                                                    <Rectangle Fill="Black" Opacity="0.5"
                                                               Width="{Binding ElementName=StaticStarImage, Path=ActualWidth}"
                                                               Height="{Binding ElementName=StaticStarImage, Path=ActualHeight}">
                                                        <Rectangle.OpacityMask>
                                                            <ImageBrush ImageSource="{DynamicResource StaticStarIcon}"/>
                                                        </Rectangle.OpacityMask>
                                                    </Rectangle>
                                                </Grid>
                                            </Grid>
                                        </Button>

                                        <!-- Denomination button panel displayed per game when tab is showing extra large icons  -->
                                        <Grid x:Name="SingleGameDenominationControl"
                                              HorizontalAlignment="Center" VerticalAlignment="Bottom"
                                              Visibility="{Binding Path=DataContext.IsExtraLargeGameIconTabActive, RelativeSource={RelativeSource AncestorType=ItemsControl}, Converter={StaticResource BoolToVisConverter}}">
                                            <Image common:ImageHelper.SourceResourceKey="{Binding DenomPanelKey}"
                                                   Stretch="None"
                                                   Visibility="{Binding HasCustomDenomPanel, Converter={StaticResource BoolToVisConverter}}"/>
                                            <!-- If no panel is provided, generate a custom sized denom panel -->
                                            <StackPanel Orientation="Horizontal"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Top"
                                                        Visibility="{Binding HasCustomDenomPanel, Converter={StaticResource BoolToCollapsedConverter}}">
                                                <Image x:Name="DenominationPanelLeftImage" Stretch="Fill"
                                                       common:ImageHelper.SourceResourceKey="DenominationPanelLeft"
                                                       RenderOptions.BitmapScalingMode="HighQuality" Width="20">
                                                    <Image.Height>
                                                        <MultiBinding Converter="{StaticResource DenomPanelHeightConv}">
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconMargin}"/>
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconHeight}"/>
                                                        </MultiBinding>
                                                    </Image.Height>
                                                </Image>
                                                <Image x:Name="DenominationPanelMidImage" Stretch="Fill"
                                                       common:ImageHelper.SourceResourceKey="DenominationPanelMid"
                                                       RenderOptions.BitmapScalingMode="HighQuality">
                                                    <Image.Width>
                                                        <MultiBinding Converter="{StaticResource DenomPanelWidthConv}">
                                                            <Binding Path="Denominations"/>
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconMargin}"/>
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconWidth}"/>
                                                        </MultiBinding>
                                                    </Image.Width>
                                                    <Image.Height>
                                                        <MultiBinding Converter="{StaticResource DenomPanelHeightConv}">
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconMargin}"/>
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconHeight}"/>
                                                        </MultiBinding>
                                                    </Image.Height>
                                                </Image>
                                                <Image x:Name="DenominationPanelRightImage" Stretch="Fill"
                                                       common:ImageHelper.SourceResourceKey="DenominationPanelRight"
                                                       RenderOptions.BitmapScalingMode="HighQuality" Width="20">
                                                    <Image.Height>
                                                        <MultiBinding Converter="{StaticResource DenomPanelHeightConv}">
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconMargin}"/>
                                                            <Binding Source="{StaticResource ExtraLargeGameIconDenomIconHeight}"/>
                                                        </MultiBinding>
                                                    </Image.Height>
                                                </Image>
                                            </StackPanel>
                                            <ItemsControl x:Name="DenominationPanelItemsControl"
                                                          VerticalAlignment="Center" HorizontalAlignment="Center"
                                                          ItemsSource="{Binding Denominations}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Horizontal"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate DataType="{x:Type viewModels:DenominationInfoViewModel}">
                                                        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                            <Image common:ImageHelper.SourceResourceKey="{Binding DenomButtonSingleKey}"
                                                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                                                   RenderOptions.BitmapScalingMode="HighQuality"
                                                                   Margin="15"
                                                                   Stretch="None"
                                                                   Grid.Column="0" Grid.Row="0">
                                                                <i:Interaction.Triggers>
                                                                    <i:EventTrigger EventName="MouseLeftButtonDown" >
                                                                        <i:InvokeCommandAction Command="{Binding DataContext.DenominationForSpecificGamePressedCommand, ElementName=GameList}">
                                                                            <i:InvokeCommandAction.CommandParameter>
                                                                                <MultiBinding Converter="{StaticResource MultiParameterCommandConv}">
                                                                                    <Binding Path="Tag" ElementName="GameIconButton"/>
                                                                                    <Binding Path="Denomination"/>
                                                                                </MultiBinding>
                                                                            </i:InvokeCommandAction.CommandParameter>
                                                                        </i:InvokeCommandAction>
                                                                    </i:EventTrigger>
                                                                </i:Interaction.Triggers>
                                                            </Image>

                                                            <StackPanel HorizontalAlignment="Center"
                                                                        VerticalAlignment="Center"
                                                                        Margin="0 0 0 18"
                                                                        Orientation="Horizontal">
                                                                <!-- Larger text for value -->
                                                                <controls:TextPath FontSize="48"
                                                                                   Style="{StaticResource DenomTextStyle}"
                                                                                   Text="{Binding DenomText}" />
                                                                <!-- Smaller text for denom symbol -->
                                                                <controls:TextPath FontSize="24"
                                                                                   Margin="3 0 0 -4"
                                                                                   Style="{StaticResource DenomTextStyle}"
                                                                                   Text="{Binding DenomSymbol}" />
                                                            </StackPanel>
                                                        </Grid>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <!-- Combined animated jackpot banners -->
                    <bink:BinkViewerControl Grid.Column="1"
                                            Grid.Row="1"
                                            Grid.RowSpan="2"
                                            Margin="0 120 2 0"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Top"
                                            Stretch="None"
                                            IsHitTestVisible="False"
                                            Filename="{DynamicResource LobbyJackpotMeters}"
                                            Visibility="{Binding IsJackpotBannerVisible, Converter={StaticResource BoolToVisConverter}}"/>

                    <!-- Grand jackpot text -->
                    <ItemsControl Grid.Column="1"
                                  Grid.Row="1"
                                  Margin="200 210 0 0"
                                  FocusVisualStyle="{x:Null}"
                                  ItemsSource="{Binding ProgressiveLabelDisplay.MultipleGameAssociatedSapLevelOneAmount}"
                                  HorizontalAlignment="Left"
                                  VerticalAlignment="Top"
                                  Visibility="{Binding IsJackpotBannerVisible, Converter={StaticResource BoolToVisConverter}}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <controls:ResizingStackPanel Orientation="Horizontal"
                                                             HorizontalAlignment="Center" VerticalAlignment="Center"
                                                             Width="430"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Image Stretch="Uniform" Height="60"
                                       Source="{Binding ., Converter={StaticResource CharacterToResourceImageConv}, ConverterParameter=LightningLinkGrand}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <!-- Major jackpot text -->
                    <ItemsControl Grid.Column="1"
                                  Grid.Row="1"
                                  Margin="670 210 0 0"
                                  FocusVisualStyle="{x:Null}"
                                  ItemsSource="{Binding Path=ProgressiveLabelDisplay.MultipleGameAssociatedSapLevelTwoAmount}"
                                  HorizontalAlignment="Left"
                                  VerticalAlignment="Top"
                                  Visibility="{Binding IsJackpotBannerVisible, Converter={StaticResource BoolToVisConverter}}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <controls:ResizingStackPanel Orientation="Horizontal"
                                                             HorizontalAlignment="Center" VerticalAlignment="Center"
                                                             Width="362"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Image Stretch="UniformToFill" Height="60"
                                       Source="{Binding ., Converter={StaticResource CharacterToResourceImageConv}, ConverterParameter=LightningLinkMajor}" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <!-- Bottom denomination buttons shared with all games on page -->
                    <ItemsControl x:Name="MultiGameDenominationControl" 
                                  Grid.Row="2" Grid.RowSpan="2" Grid.Column="0" Grid.ColumnSpan="3"
                                  ItemsSource="{Binding GameTabInfo.Denominations}"
                                  VerticalAlignment="Bottom" HorizontalAlignment="Center" 
                                  Visibility="{Binding Path=IsExtraLargeGameIconTabActive, Converter={StaticResource BoolToCollapsedConverter}}"
                                  Margin="0 0 0 50">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type viewModels:DenominationInfoViewModel}">
                                <Viewbox Stretch="Uniform">
                                    <Grid>
                                        <Image common:ImageHelper.SourceResourceKey="{Binding DenomButtonSharedKey}"
                                               Stretch="Uniform"
                                               Grid.Column="0" Grid.Row="0">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                                    <i:InvokeCommandAction Command="{Binding DataContext.DenominationPressedCommand, ElementName=MultiGameDenominationControl}"
                                                                           CommandParameter="{Binding}"  />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </Image>
                                        <StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Margin="0 0 0 20"
                                                    Orientation="Horizontal">
                                            <!-- Larger text for value -->
                                            <controls:TextPath FontSize="50"
                                                               Style="{StaticResource SharedDenomTextStyle}"
                                                               Text="{Binding DenomText}"/>
                                            <!-- Smaller text for denom symbol -->
                                            <controls:TextPath Margin="3 0 0 -4"
                                                               Style="{StaticResource SharedDenomTextStyle}"
                                                               Text="{Binding DenomSymbol}"/>
                                        </StackPanel>
                                    </Grid>
                                </Viewbox>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <!-- Notification/banner text -->
                    <Grid Grid.Row="3"
                          Grid.Column="0"
                          Grid.ColumnSpan="3"
                          Margin="19 0 20 8">
                        <lobby:LobbyBannerView />
                        <Viewbox HorizontalAlignment="Left">
                            <Border Background="#FF000000"
                                    HorizontalAlignment="Left"
                                    BorderThickness="0"
                                    CornerRadius="10"
                                    Padding="8,4,8,4"
                                    Visibility="{Binding IsPaidMeterVisible, Converter={StaticResource BoolToVisHiddenConverter}}">
                                <StackPanel Orientation="Horizontal">
                                    <Label Content="{Binding PaidMeterLabel}"
                                           FontSize="30"
                                           FontFamily="Impact"
                                           Foreground="White"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                                    <Label Content="{Binding PaidMeterValue}"
                                           FontSize="30"
                                           Padding="1,5,5,5"
                                           FontFamily="Impact"
                                           Foreground="White"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Viewbox>

                        <Viewbox HorizontalAlignment="Right" VerticalAlignment="Bottom">
                            <Border Background="#FF000000"
                                    BorderThickness="0"
                                    CornerRadius="6"
                                    Margin="0,4,0,4"
                                    Padding="4,0,4,0"
                                    Visibility="{Binding IsNotificationTextVisible, Converter={StaticResource BoolToVisHiddenConverter}}">
                                <Label Content="{Binding CurrentNotificationText}"
                                       FontSize="16"
                                       FontFamily="Impact"
                                       Foreground="White"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                            </Border>
                        </Viewbox>
                    </Grid>

                    <!--UPI should be in a viewbox to scale entire user control correctly-->
                    <!--Setting Margin to match old UPI sizing for Responsible Gaming Overlays-->
                    <Viewbox Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="3" Margin="19 2 19 0">
                        <Grid>
                            <lobby:StandardUpi Visibility="{Binding MultiLanguageEnabled, Converter={StaticResource BoolToCollapsedConverter}}"/>
                            <lobby:MultiLanguageUpi Visibility="{Binding MultiLanguageEnabled, Converter={StaticResource BoolToVisConverter}}"/>
                        </Grid>
                    </Viewbox>
                </Grid>
            </Viewbox>
        </Grid>
    </DataTemplate>
</ResourceDictionary>
